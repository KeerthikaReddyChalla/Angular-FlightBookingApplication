<div class="dashboard-container">

  <!-- HEADER -->
  <div class="dashboard-header">
    <h2>My Bookings</h2>
  </div>

  <!-- LOADING -->
  <div *ngIf="loading" class="loading">
    Loading booking history...
  </div>

  <!-- EMPTY -->
  <div *ngIf="!loading && bookings.length === 0" class="empty">
    No bookings found.
  </div>

  <!-- BOOKINGS GRID -->
  <div class="booking-grid">
    <div class="booking-card" *ngFor="let booking of bookings">

      <div class="card-header">
        <span class="pnr">PNR: {{ booking.pnr }}</span>
        <span
          class="status"
          [class.cancelled]="booking.cancelled"
        >
          {{ booking.cancelled ? 'Cancelled' : 'Confirmed' }}
        </span>
      </div>

      <div class="card-body">
        <p><strong>Flight ID:</strong> {{ booking.flightId }}</p>
        <p><strong>Email:</strong> {{ booking.email }}</p>
        <p><strong>Passengers:</strong> {{ booking.passengers?.length }}</p>
        <p>
          <strong>Booked On:</strong>
          {{ booking.bookingTime | date:'medium' }}
        </p>
      </div>

      <button
        class="cancel-btn"
        *ngIf="!booking.cancelled"
        (click)="openCancelDialog(booking.pnr)"
      >
        Cancel Ticket
      </button>

    </div>
  </div>

</div>

<!-- CONFIRM DIALOG -->
<div class="dialog-backdrop" *ngIf="showConfirmDialog">
  <div class="dialog-box">
    <h3>Cancel Booking?</h3>
    <p>
      Are you sure you want to cancel this ticket?
      <br />
      <strong>PNR: {{ selectedPnr }}</strong>
    </p>

    <div class="dialog-actions">
      <button class="no-btn" (click)="closeDialog()">No</button>
      <button class="yes-btn" (click)="confirmCancel()">Yes, Cancel</button>
    </div>
  </div>
</div>
